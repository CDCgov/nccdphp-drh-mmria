<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<meta name="description" content="The Maternal Mortality Review Information App (MMRIA) is a public health software tool created to collect, store, analyze and summarize information relevant to maternal deaths. The MMRIA serves 2 purposes: first to provide complete, detailed, and organized medical and social information that can be used by medical review committees to investigate individual maternal deaths; and second to provide a standardized cumulative database for future research and analysis on maternal mortality.">
<title>Maternal Mortality Review Information App | Public Health | MMRIA</title>
<LINK href="./styles/mmria.css" type="text/css" rel="stylesheet" />
<script src="./scripts/jquery-3.1.1.min.js"></script>
<script src="./bower_components/pouchdb/dist/pouchdb.min.js"></script>

<script src="./scripts/data_access.js" type="text/javascript"></script>

<!-- script src="scripts/ajax.js" type="text/javascript"></script>
<script src="react-test/meta_navigator.js" type="text/javascript"></script>
<script src="react-test/meta_navigator.js" type="text/javascript"></script>
<script src="scripts/editor/tree_node.js" type="text/javascript"></script>
<script src="scripts/editor/editor.js" type="text/javascript"></script-->
<script src="./scripts/editor/navigation_renderer.js" type="text/javascript"></script>
<script src="./scripts/editor/page_renderer.js" type="text/javascript"></script>
<script src="./scripts/create_default_object.js" type="text/javascript"></script>
<script src="./scripts/profile.js" type="text/javascript"></script>
<script src="./scripts/url_monitor.js" type="text/javascript"></script>
<script src="./scripts/feed_back.js" type="text/javascript"></script>
<script type="text/javascript">
'use strict';

//http://www.w3schools.com/css/css3_flexbox.asp

var g_metadata = null;
var g_data = null;
var g_ui = {};

$(function ()
{

window.onhashchange = function(e)
{
  /*
  e = HashChangeEvent
  {
    isTrusted: true,
    oldURL: "http://localhost:12345/react-test/#/",
    newURL: "http://localhost:12345/rea
  }*/
  if(e.isTrusted)
  {
    var url_state = url_monitor.get_url_state(e.newURL);
		/*
    selected_form_name: form,
    "selected_id": selected_id,
    "selected_child_id": selected_child_id*/
		var section_list = document.getElementsByTagName("section");
		for(var i = 0; i < section_list.length; i++)
		{
			var section = section_list[i];
			if(section.id == url_state.selected_form_name + "_id")
			{
					section.style.display = "block";
			}
			else
			{
					section.style.display = "none";
			}
		}
  }
  else
  {
    // do nothing for now
  }
};

	profile.initialize_profile();

	$.ajax({
			url: location.protocol + '//' + location.host + '/meta-data/01/home_record.json',
			data: {foo: 'bar'}
	}).done(function(response) {
			g_metadata = response;
			g_data = create_default_object(g_metadata, {});

			document.getElementById('navigation_id').innerHTML = navigation_render(g_metadata, 0).join("");

			document.getElementById('form_content_id').innerHTML = page_render(g_metadata, g_data).join("");

	});
});
</script>
</head>
<body>
<div id='root'>
	<img src="images/mmria-secondary.svg" height=75 width=100 />
	<h1>App Element: MMRIA</h1>
	<div id='profile_content_id'>App Element: MMRIA</div>
	<div id='page_content_id' style='clear:"left"'>
		<nav id='navigation_id'></nav>
		<br/>
		<div id='form_content_id'></div>
	</div>
</div>
</body>
</html>
