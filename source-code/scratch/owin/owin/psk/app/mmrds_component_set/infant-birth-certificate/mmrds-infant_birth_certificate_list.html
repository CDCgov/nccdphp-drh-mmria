<link rel="import" href="../../bower_components/polymer/polymer.html">
<link rel="import" href="../../bower_components/paper-checkbox/paper-checkbox.html">
<link rel="import" href="../../bower_components/paper-input/paper-input.html">
<link rel="import" href="../../bower_components/paper-dropdown-menu/paper-dropdown-menu.html">
<link rel="import" href="../../bower_components/paper-listbox/paper-listbox.html">
<link rel="import" href="../../bower_components/paper-item/paper-item.html">
<link rel="import" href="../mmrds-state-dropdown/mmrds-state-dropdown.html">
<link rel="import" href="../mmrds-address/mmrds-address.html">
<link rel="import" href="../race/mmrds-race.html">
<link rel="import" href="../cause-of-death-grid/mmrds-cause_of_death_grid.html">
<link rel="import" href="../yesno/mmrds-yesno.html">
<link rel="import" href="../demographic/mmrds-demographic.html">

<dom-module id="mmrds-infant_birth_certificate_list">
<template> 
<style>
      :host {
        display: none;
      }
      :host([active]) {
        display: block;
      }
</style>
<paper-material elevation="1">			
	<h1>List Infant birth Certificate/Fetal Death Certificate</h1>

	<paper-button label="[ add new ]" raised></paper-button>
	
	

</paper-material>

</template>
<script>
Polymer({
	is: 'mmrds-infant_birth_certificate_list',
	properties: 
	{
		active: {
          type: Boolean,
          value: false,
          reflectToAttribute: true
        },
		home_record: 
		{ 
			type: Object,
			notify: true
		},
		current_record_id: { 
			type: String,
			notify: true,
			observer: 'currentRecordChange'
		
		},
		death_certificate: 
		{ 
			type: Object,
			notify: true
		}
	},
	currentRecordChange:function() 
	{
		  var found_index = -1;
		  for(var i = 0; i < g_data.length; i++)
		  {
			if(g_data[i]._id == this.current_record_id)
			{
				found_index = i;
				break;
			}
		  }
		  
		  if(found_index > -1)
		  {
			this.home_record = g_data[found_index];
		  }
		  else if(g_data.length > 0)
		  {
			this.home_record = g_data[0];
		  }
		  
		  if(this.home_record)
		  {
			if(this.home_record.death_certificate)
			{
				this.death_certificate = this.home_record.death_certificate;
				if(this.death_certificate.causes_of_death)
				{
					this.causes_of_death = this.death_certificate.causes_of_death;
				}
				else
				{
					this.death_certificate.causes_of_death = [];
					this.causes_of_death = this.death_certificate.causes_of_death;
				}
			}
			else
			{
				this.home_record.death_certificate = {};
				this.death_certificate = this.home_record.death_certificate;
				if(this.death_certificate.causes_of_death)
				{
					this.causes_of_death = this.death_certificate.causes_of_death;
				}
				else
				{
					this.death_certificate.causes_of_death = [];
					this.causes_of_death = this.death_certificate.causes_of_death;
				}
			}
			
		  }

		//console.log('currentRecordChange: ' + this.current_record_id);
		//console.log('home_record: ' + this.home_record);
	}
  });
  
  
</script>
	
</dom-module>