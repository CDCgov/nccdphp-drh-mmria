<link rel="import" href="../../bower_components/polymer/polymer.html">
<link rel="import" href="../../bower_components/paper-checkbox/paper-checkbox.html">
<link rel="import" href="../../bower_components/paper-input/paper-input.html">
<link rel="import" href="../../bower_components/paper-dropdown-menu/paper-dropdown-menu.html">
<link rel="import" href="../../bower_components/paper-listbox/paper-listbox.html">
<link rel="import" href="../../bower_components/paper-item/paper-item.html">
<link rel="import" href="../../bower_components/paper-radio-button/paper-radio-button.html">
<link rel="import" href="../../bower_components/paper-radio-group/paper-radio-group.html">

<link rel="import" href="../mmrds-state-dropdown/mmrds-state-dropdown.html">
<link rel="import" href="../mmrds-address/mmrds-address.html">
<link rel="import" href="../race/mmrds-race.html">
<link rel="import" href="../cause-of-death-grid/mmrds-cause_of_death_grid.html">
<link rel="import" href="../yesno/mmrds-yesno.html">
<link rel="import" href="../demographic/mmrds-demographic.html">
<link rel="import" href="../date/mmrds-date.html">

<dom-module id="mmrds-infant_birth_certificate_detail">
<template>  
<style>
      :host {
        display: none;
      }
      :host([active]) {
        display: block;
      }
</style>

<paper-material elevation="1">			
	<h1>Infant birth/ Fetal death certificate</h1>
	<div>Mother's Record Id: [[home_record.record_id ]]</div>
	<div>Mother's Name: [[home_record.last_name ]], [[home_record.first_name ]]</div>
</paper-material>	



<paper-material elevation="1">	
	<h3>record type*</h3>
	<paper-radio-group selected="{{bound_data.record_type}}">
		<paper-radio-button name="">not specified</paper-radio-button>
		<paper-radio-button name="cigarette">cigarette(s)</paper-radio-button>
		<paper-radio-button name="pack">Pack(s)</paper-radio-button>
	</paper-radio-group>
<paper-checkbox checked="">Multiple gestation</paper-checkbox>
<paper-input label="Birth order"></paper-input>
</paper-material>		

<paper-material elevation="1">	
	<h1>Newborn ( fetus) record identification</h1>

<paper-input label="First name" value=""></paper-input>
<paper-input label="Middle name" value=""></paper-input>
<paper-input label="Last name" value=""></paper-input>
<paper-input label="State file no." value=""></paper-input>
<paper-input label="Local file no." value=""></paper-input>
<paper-input label="Newborn medical record no." value=""></paper-input>

<mmrds-date label="Date of delivery*"></mmrds-date>
<paper-input label="Middle name Last name" value=""></paper-input>


</paper-material>		

<paper-material elevation="1">	
</paper-material>			
</template>
<script>
Polymer({
	is: 'mmrds-infant_birth_certificate_detail',
	properties: 
	{
		active: {
          type: Boolean,
          value: false,
          reflectToAttribute: true
        },
		home_record: 
		{ 
			type: Object,
			notify: true
		},
		current_record_id: { 
			type: String,
			notify: true,
			observer: 'currentRecordChange'
		
		},
		death_certificate: 
		{ 
			type: Object,
			notify: true
		}
	},
	currentRecordChange:function() 
	{
		  var found_index = -1;
		  for(var i = 0; i < g_data.length; i++)
		  {
			if(g_data[i]._id == this.current_record_id)
			{
				found_index = i;
				break;
			}
		  }
		  
		  if(found_index > -1)
		  {
			this.home_record = g_data[found_index];
		  }
		  else if(g_data.length > 0)
		  {
			this.home_record = g_data[0];
		  }
		  
		  if(this.home_record)
		  {
			if(this.home_record.death_certificate)
			{
				this.death_certificate = this.home_record.death_certificate;
				if(this.death_certificate.causes_of_death)
				{
					this.causes_of_death = this.death_certificate.causes_of_death;
				}
				else
				{
					this.death_certificate.causes_of_death = [];
					this.causes_of_death = this.death_certificate.causes_of_death;
				}
			}
			else
			{
				this.home_record.death_certificate = {};
				this.death_certificate = this.home_record.death_certificate;
				if(this.death_certificate.causes_of_death)
				{
					this.causes_of_death = this.death_certificate.causes_of_death;
				}
				else
				{
					this.death_certificate.causes_of_death = [];
					this.causes_of_death = this.death_certificate.causes_of_death;
				}
			}
			
		  }

		//console.log('currentRecordChange: ' + this.current_record_id);
		//console.log('home_record: ' + this.home_record);
	}
  });
  
  
</script>
	
</dom-module>