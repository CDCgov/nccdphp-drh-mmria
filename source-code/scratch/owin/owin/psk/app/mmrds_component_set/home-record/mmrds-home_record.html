<link rel="import" href="../../bower_components/polymer/polymer.html">		
<link rel="import" href="../../bower_components/paper-input/paper-input.html">
<link rel="import" href="../../bower_components/paper-checkbox/paper-checkbox.html">
<link rel="import" href="../../bower_components/paper-dropdown-menu/paper-dropdown-menu.html">
<link rel="import" href="../../bower_components/paper-badge/paper-badge.html">
<link rel="import" href="../../bower_components/paper-listbox/paper-listbox.html">
<link rel="import" href="../../bower_components/paper-item/paper-item.html">

<dom-module id="mmrds-home_record">
<template>  

		<paper-material elevation="1">			
			<h1>Home Record Header</h1>
			<div>Record Id: {{home_record.record_id }}</div>
			<div><paper-checkbox checked="{{home_record.is_valid_maternal_mortality_record }}">is a valid record</paper-checkbox></div>
			<div>Name: {{home_record.last_name }}, {{home_record.first_name }}</div>
		</paper-material>		 
		
		 <paper-material elevation="1">
		<h1>Key Record Information</h1>
		<paper-input label="First Name" value="{{home_record.first_name}}"></paper-input>
		<paper-input label="Middle Name" value="{{home_record.middle_name}}"></paper-input>
		<paper-input label="Last Name" value="{{home_record.last_name}}"></paper-input>
		<paper-input label="Date of Death* (YYYY-MM-DD)" value="{{home_record.date_of_death}}"></paper-input>
		<paper-checkbox checked="{{home_record.date_of_death_is_estimated}}">Date of death is estimated?</paper-checkbox>
		<paper-input label="State of Death Record" value="{{home_record.state_of_death}}"></paper-input>
		<paper-input label="State of last known residence" value="{{home_record.state_of_last_known_residence}}"></paper-input>

		<paper-input label="Agency-based case identifier" value="{{home_record.agency_case_id}}"></paper-input>
</paper-material>
			
<paper-material elevation="1">			
		<h1>Case Progress Report:</h1>
<div>
<paper-dropdown-menu id="progress_death_certificate" label="Death certificate">
  <paper-listbox class="dropdown-content" selected="{{ home_record.progress_death_certificate}}" attr-for-selected="value">
    <paper-item>not started</paper-item>
    <paper-item>in progress</paper-item>
    <paper-item>completed</paper-item>
    <paper-item>not available</paper-item>
	<paper-item>not applicable</paper-item>
  </paper-listbox>
</paper-dropdown-menu>
<paper-badge label="{{progress_death_certificate_count}}" for="progress_death_certificate"></paper-badge>
</div>				
		
			
		
<div>		
<paper-dropdown-menu id="progress_maternal_birth_certificate" label="Maternal birth certificate">
  <paper-listbox class="dropdown-content" selected="{{ home_record.progress_maternal_birth_certificate}}" attr-for-selected="value">
    <paper-item>not started</paper-item>
    <paper-item>in progress</paper-item>
    <paper-item>completed</paper-item>
    <paper-item>not available</paper-item>
	<paper-item>not applicable</paper-item>
  </paper-listbox>
</paper-dropdown-menu>
<paper-badge label="{{progress_maternal_birth_certificate_count}}" for="progress_maternal_birth_certificate"></paper-badge>
</div>				

<!-- selected="{{data_value}}" attr-for-selected="value" -->			
<div>			
<paper-dropdown-menu id="progress_prenatal_care" label="Prenatal care record"  >
  <paper-listbox class="dropdown-content" selected="{{ home_record.progress_prenatal_care}}"  attr-for-selected="value">
    <paper-item value="not started">not started</paper-item>
    <paper-item value="in progress">in progress</paper-item>
    <paper-item value="completed">completed</paper-item>
    <paper-item value="not available">not available</paper-item>
	<paper-item value="not applicable">not applicable</paper-item>
  </paper-listbox>
</paper-dropdown-menu>
<paper-badge label="{{progress_prenatal_care_count}}" for="progress_prenatal_care"></paper-badge>
</div>				
	
<div>	
<paper-dropdown-menu id="progress_er_and_hospital_visits" label="ER visit(s) and Hospitalization(s)">
  <paper-listbox class="dropdown-content" selected="{{ home_record.progress_er_and_hospital_visits}}" attr-for-selected="value">
    <paper-item>not started</paper-item>
    <paper-item>in progress</paper-item>
    <paper-item>completed</paper-item>
    <paper-item>not available</paper-item>
	<paper-item>not applicable</paper-item>
  </paper-listbox>
</paper-dropdown-menu>
<paper-badge label="{{progress_er_and_hospital_visits_count}}" for="progress_er_and_hospital_visits"></paper-badge>
</div>				
<div>			
<paper-dropdown-menu id="progress_informant_interviews" label="Informant interviews">
  <paper-listbox class="dropdown-content" selected="{{ home_record.progress_informant_interviews}}" attr-for-selected="value">
    <paper-item>not started</paper-item>
    <paper-item>in progress</paper-item>
    <paper-item>completed</paper-item>
    <paper-item>not available</paper-item>
	<paper-item>not applicable</paper-item>
  </paper-listbox>
</paper-dropdown-menu>
<paper-badge label="{{progress_informant_interviews_count}}" for="progress_informant_interviews"></paper-badge>
</div>				

<div>		
<paper-dropdown-menu id="progress_autopsy_report" label="Autopsy report">
  <paper-listbox class="dropdown-content" selected="{{ home_record.progress_autopsy_report}}" attr-for-selected="value">
    <paper-item>not started</paper-item>
    <paper-item>in progress</paper-item>
    <paper-item>completed</paper-item>
    <paper-item>not available</paper-item>
	<paper-item>not applicable</paper-item>
  </paper-listbox>
</paper-dropdown-menu>
<paper-badge label="{{progress_autopsy_report_count}}" for="progress_autopsy_report"></paper-badge>
</div>				
<div>			
<paper-dropdown-menu id="progress_child_birth_certificate" label="Infant/fetal birth certificate(s)">
  <paper-listbox class="dropdown-content" selected="{{ home_record.child_birth_certificate}}" attr-for-selected="value">
    <paper-item>not started</paper-item>
    <paper-item>in progress</paper-item>
    <paper-item>completed</paper-item>
    <paper-item>not available</paper-item>
	<paper-item>not applicable</paper-item>
  </paper-listbox>
</paper-dropdown-menu>
<paper-badge label="{{progress_child_birth_certificate_count}}" for="progress_child_birth_certificate"></paper-badge>
</div>				
<div>			
<paper-dropdown-menu id="progress_other_medical_visits" label="Other medical visits">
  <paper-listbox class="dropdown-content"  selected="{{ home_record.progress_other_medical_visits}}" attr-for-selected="value">
    <paper-item>not started</paper-item>
    <paper-item>in progress</paper-item>
    <paper-item>completed</paper-item>
    <paper-item>not available</paper-item>
	<paper-item>not applicable</paper-item>
  </paper-listbox>
</paper-dropdown-menu>
<paper-badge label="{{progress_other_medical_visits_count}}" for="progress_other_medical_visits"></paper-badge>
</div>				
<div>			
<paper-dropdown-menu id="progress_social_and_psyc_profile" label="Social and psychological profile">
  <paper-listbox class="dropdown-content"  selected="{{ home_record.progress_social_and_psyc_profile}}" attr-for-selected="value">
    <paper-item>not started</paper-item>
    <paper-item>in progress</paper-item>
    <paper-item>completed</paper-item>
    <paper-item>not available</paper-item>
	<paper-item>not applicable</paper-item>
  </paper-listbox>
</paper-dropdown-menu>
<paper-badge label="{{progress_social_and_psyc_profile_count}}" for="progress_social_and_psyc_profile"></paper-badge>
</div>				
<div>			
<paper-dropdown-menu id="progress_committee_review_worksheet" label="Committee review worksheet">
  <paper-listbox class="dropdown-content"  selected="{{ home_record.progress_committee_review_worksheet}}" attr-for-selected="value">
    <paper-item>not started</paper-item>
    <paper-item>in progress</paper-item>
    <paper-item>completed</paper-item>
    <paper-item>not available</paper-item>
	<paper-item>not applicable</paper-item>
  </paper-listbox>
</paper-dropdown-menu>
<paper-badge label="{{progress_committee_review_worksheet_count}}" for="progress_committee_review_worksheet"></paper-badge>
</div>		
</paper-material>

</template>
<script>
	Polymer
	({
        is: 'mmrds-home_record',
		properties: 
		{
			home_record: 
			{ 
				type: Object,
				notify: true
			},
			current_record_id: { 
				type: String,
				notify: true,
				observer: 'currentRecordChange'
			
			},
			progress_autopsy_report_count:{ type:Number, value: function (){ var result = 0; if (home_record.progress_autopsy_report){ return home_record.progress_autopsy_report.length } else { return 0;} },
			progress_committee_review_worksheet_count:{ type:Number, value: function (){ return 0;} },
			progress_death_certificate_count:{ type:Number, value: function (){ return 0;} },
			progress_er_and_hospital_visits_count:{ type:Number, value: function (){ return 0;} },
			progress_informant_interviews_count:{ type:Number, value: function (){ return 0;} },
			progress_maternal_birth_certificate_count:{ type:Number, value: function (){ return 0;} },
			progress_child_birth_certificate_count:{ type:Number, value: function (){ return 0;} },
			progress_other_medical_visits_count:{ type:Number, value: function (){ return 0;} },
			progress_prenatal_care_count:{ type:Number, value: function (){ return 0;} },
			progress_social_and_psyc_profile_count:{ type:Number, value: function (){ return 0;} },
		},
		currentRecordChange:function() 
		{
			  var found_index = -1;
			  for(var i = 0; i < g_data.length; i++)
			  {
				if(g_data[i]._id == this.current_record_id)
				{
					found_index = i;
					break;
				}
			  }
			  
			  if(found_index > -1)
			  {
				this.home_record = g_data[found_index];
			  }
			  else if(g_data.length > 0)
			  {
				this.home_record = g_data[0];
			  }

			//console.log('currentRecordChange: ' + this.current_record_id);
			//console.log('home_record: ' + this.home_record);
		}


    });
	  
</script>
	
</dom-module>