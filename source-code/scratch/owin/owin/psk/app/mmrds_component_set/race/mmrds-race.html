<link rel="import" href="../../bower_components/polymer/polymer.html">
<link rel="import" href="../../bower_components/paper-input/paper-input.html">
<link rel="import" href="../../bower_components/paper-listbox/paper-listbox.html">
<link rel="import" href="../../bower_components/paper-item/paper-item.html">
<dom-module id="mmrds-race">
<template>  
<paper-material elevation="1">			
	<h1 id="label"></h1>
	<div id="selected_label">[[bound_data]]</div>
	<h2>Race (multi-selectable - select all that apply)*</h2>
	<paper-listbox  id="race_listbox" multi  selectedValues="{{bound_data}}" attr-for-selected="value">
			<paper-item value="White">White</paper-item>
			<paper-item value="Black">Black</paper-item>
			<paper-item value="Ameican Indian/AK Native">Ameican Indian/AK Native</paper-item>
			<paper-item value="Native Hawaiian">Native Hawaiian</paper-item>
			<paper-item value="Guamanian or Chamorro">Guamanian or Chamorro</paper-item>
			<paper-item value="Samoan">Samoan</paper-item>
			<paper-item value="Other Pacific Islander">Other Pacific Islander</paper-item>
			<paper-item value="Asian Indian">Asian Indian</paper-item>
			<paper-item value="Filipino">Filipino</paper-item>
			<paper-item value="Korean">Korean</paper-item>
			<paper-item value="Other Asian">Other Asian</paper-item>
			<paper-item value="Chinese">Chinese</paper-item>
			<paper-item value="Japanese">Japanese</paper-item>
			<paper-item value="Vietnamese">Vietnamese</paper-item>
			<paper-item value="Other race">Other race</paper-item>
			<paper-item value="Race not specified">Race not specified</paper-item>
	</paper-listbox>
</paper-material>	
</template>
<script>
	Polymer({
        is: 'mmrds-race',
		properties: 
		{
			label: { type: String, observer: '_labelChanged' },
			bound_data: 
			{ 
				type: Object,
				notify: true//,
				//observer: 'selectedLabelChanged'
			}
		},
		_labelChanged:function(label){
			this.$.selected_label.textContent = label;
			this.fire('on-race-change', { 'label': label });
		},
		attributeChanged: function(a)
		{
			console.log('mmrds-race.attributeChanged[' + a + ']');
		},
		selectedLabelChanged: function()
		{
			//console.log('mmrds-race._selectedLabelChanged ');
			//console.log(v);
			//console.log(v[0].innerText);

			var result = [];
			var pList = this.$.race_listbox.items;
			for(var i in pList)		
			{
				
				if(pList[i].selected)
				{
					var val = pList[i].innerText.Trim();
					result.push(pList[i].innerText);
				}
			}
			
			var selection = '' + result.join(', ');
			this.$.selected_label.innerText = selection;

			/*var selected_index = g_get_selected_index();
			
			if(selected_index > -1)
			{
				g_data[selected_index].death_certificate.race = selection;
			}*/
		}
			/**/
		/*,
		getSelectedValues: ,
		created: function() {
			console.log(this.localName + '#' + this.id + ' was created');
		},
		ready: function() {
        console.log(this.localName + '#' + this.id + ' has local DOM initialized');
		},
      attached: function() {
        console.log(this.localName + '#' + this.id + ' was attached');
      },

      detached: function() {
        console.log(this.localName + '#' + this.id + ' was detached');
      },
      attributeChanged: function(name, type) {
        console.log(this.localName + '#' + this.id + ' attribute ' + name +
          ' was changed to ' + this.getAttribute(name));
      }*/

      });
</script>
	
</dom-module>