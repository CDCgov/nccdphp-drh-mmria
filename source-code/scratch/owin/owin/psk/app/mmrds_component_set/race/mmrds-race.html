<link rel="import" href="../../bower_components/polymer/polymer.html">
<link rel="import" href="../../bower_components/paper-input/paper-input.html">
<link rel="import" href="../../bower_components/paper-listbox/paper-listbox.html">
<link rel="import" href="../../bower_components/paper-item/paper-item.html">
<dom-module id="mmrds-race">
<template>  
<paper-material elevation="1">			
	<h1 id="label"></h1>
	<div id="selected_label"></div>
	<h2>Race (multi-selectable - select all that apply)*</h2>
	<paper-listbox  id="race_listbox" multi>
			<paper-item>White</paper-item>
			<paper-item>Black</paper-item>
			<paper-item>Ameican Indian/AK Native</paper-item>
			<paper-item>Native Hawaiian</paper-item>
			<paper-item>Guamanian or Chamorro</paper-item>
			<paper-item>Samoan</paper-item>
			<paper-item>Other Pacific Islander</paper-item>
			<paper-item>Asian Indian</paper-item>
			<paper-item>Filipino</paper-item>
			<paper-item>Korean</paper-item>
			<paper-item>Other Asian</paper-item>
			<paper-item>Chinese</paper-item>
			<paper-item>Japanese</paper-item>
			<paper-item>Vietnamese</paper-item>
			<paper-item>Other race</paper-item>
			<paper-item>Race not specified</paper-item>
	</paper-listbox>
</paper-material>	
</template>
<script>
	Polymer({
        is: 'mmrds-race',
		properties: 
		{
			label: { type: String, observer: '_labelChanged' },
			bound_data: 
			{ 
				type: Object,
				observer: '_selectedLabelChanged'
			}
		},
		_labelChanged:function(label){
			this.$.selected_label.textContent = label;
			this.fire('on-race-change', { 'label': label });
		},
		attributeChanged: function(a)
		{
			console.log('mmrds-race.attributeChanged[' + a + ']');
		},
		_selectedLabelChanged: function(pList)
		{
			//console.log('mmrds-race._selectedLabelChanged ');
			//console.log(v);
			//console.log(v[0].innerText);
			var result = [];
			for(var i in pList)		
			{
				result.push(pList[i].innerText);
			}
			
			var selection = result.join(', ');
			this.$.selected_label.innerText = selection;
			var selected_index = g_get_selected_index();
			
			if(selected_index > -1)
			{
				g_data[selected_index].death_certificate.race = selection;
			}
		}
			/**/
		/*,
		getSelectedValues: ,
		created: function() {
			console.log(this.localName + '#' + this.id + ' was created');
		},
		ready: function() {
        console.log(this.localName + '#' + this.id + ' has local DOM initialized');
		},
      attached: function() {
        console.log(this.localName + '#' + this.id + ' was attached');
      },

      detached: function() {
        console.log(this.localName + '#' + this.id + ' was detached');
      },
      attributeChanged: function(name, type) {
        console.log(this.localName + '#' + this.id + ' attribute ' + name +
          ' was changed to ' + this.getAttribute(name));
      }*/

      });
</script>
	
</dom-module>